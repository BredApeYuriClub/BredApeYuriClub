<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT Collections</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Sans+MS&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #ffe8d6;
            color: #333;
            position: relative;
            min-height: 100vh;
        }

        /* Navigation bar */
        .navbar {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            background-color: #4d2be7;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            gap: 20px;
        }

        .navbar a {
            text-decoration: none;
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            font-weight: bold;
        }

        .navbar a img {
            width: 20px;
            height: 20px;
            margin-right: 5px;
        }

        .navbar a:hover {
            text-decoration: underline;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 100px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 1;
            border-radius: 5px;
        }

        .dropdown-content a {
            color: #333;
            padding: 10px 15px;
            text-decoration: none;
            display: block;
            font-weight: normal;
        }

        .dropdown-content a:hover {
            background-color: #ffe0b2;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .navbar-right {
            margin-left: auto;
            display: flex;
            gap: 20px;
        }

        /* Homepage */
        .homepage {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            position: absolute;
            left: 0;
            right: 0;
            bottom: 60px;
            padding: 10px;
        }

        .collection-link {
            text-align: center;
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            width: 220px;
        }

        .background-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
            max-width: 2000px;
            max-height: 834px;
            z-index: -1;
            opacity: 0.2;
            object-fit: cover;
        }

        .collection-link:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .collection-link img {
            width: 220px;
            height: 160px;
            object-fit: cover;
            border-bottom: 2px solid #ddd;
        }

        .collection-link p {
            padding: 10px;
            font-size: 18px;
            font-weight: bold;
            color: #4d2be7;
        }

        footer {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            padding: 10px;
            background-color: #4d2be7;
            color: white;
            font-weight: bold;
        }

        .mint-button {
            display: inline-block;
            background-color: #d4af37;
            color: white;
            padding: 12px 25px;
            margin-top: 20px;
            text-decoration: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease;
        }

        .mint-button:hover {
            background-color: #b8860b;
        }

        /* Centered Section */
        .center-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .center-content img {
            width: 150px;
            height: 150px;
            margin-bottom: 15px;
        }

        #countdown {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            color: #333;
        }
    </style>
</head>
<body>
    <!-- Navigation bar -->
    <nav class="navbar">
        <a href="index.html">Home</a>
        <div class="dropdown">
            <a href="#">Collections</a>
            <div class="dropdown-content">
                <a href="colectie1.html">BredApeYuriClub</a>
                <a href="colectie3.html">Apes Bunitori Evolution</a>
                <a href="colectie2.html">Apes Apes Bunitori Club</a>
                <a href="colectie4.html">Apes Bunitori Gold Club</a>
                <a href="colectie5.html">Apes Bunitori Premium</a>
                <a href="colectie6.html">Apes Bunitori Christmas Club</a>
                <a href="colectie7.html">Apes Bunitori Limited Edition</a>
                <a href="colectie8.html">Ape UEFA Champions League</a>
            </div>
        </div>
        <div class="navbar-right">
            <a href="buy.html" class="buy-nft-button">Buy Apes Bunitori Club</a>
            <a href="https://x.com/BradApeYuriClub" target="_blank">
                <img src="images/twitter-logo.png" alt="Twitter">Twitter
            </a>
            <a href="https://opensea.io" target="_blank">
                <img src="images/opensea-logo.png" alt="OpenSea">OpenSea
            </a>
        </div>
    </nav>

    <!-- Background Video -->
    <video autoplay muted loop class="background-image">
        <source src="images/ab.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Centered Content -->
    <div class="center-content">
        <img src="images/coming-soon.png" alt="Upcoming Collection">
        <a href="#" class="mint-button">Mint Your NFT</a>
        <div id="countdown">Loading...</div>
    </div>

    <!-- Homepage -->
    <div class="homepage">
        <!-- BredApeYuriClub -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/bredapeyuriclub/overview" target="_blank">
                <img src="images/placeholder1.png" alt="BredApeYuriClub">
            </a>
            <p><a href="colectie1.html" style="text-decoration: none; color: #333;">BredApeYuriClub</a></p>
        </div>
        <!-- Apes Bunitori Club -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-club?tab=items" target="_blank">
                <img src="images/abc.png" alt="Apes Bunitori Club">
            </a>
            <p><a href="colectie2.html" style="text-decoration: none; color: #333;">Apes Bunitori Club</a></p>
        </div>
        <!-- Apes Bunitori Evolution -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-evolution/overview" target="_blank">
                <img src="images/25.png" alt="Apes Bunitori Evolution">
            </a>
            <p><a href="colectie3.html" style="text-decoration: none; color: #333;">Apes Bunitori Evolution</a></p>
        </div>
        <!-- Apes Bunitori Gold Club -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-gold-club/overview" target="_blank">
                <img src="images/placeholder4.png" alt="Apes Bunitori Gold Club">
            </a>
            <p><a href="colectie4.html" style="text-decoration: none; color: #333;">Apes Bunitori Gold Club</a></p>
        </div>
        <!-- Apes Bunitori Premium -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-premium/overview" target="_blank">
                <img src="images/107.png" alt="Apes Bunitori Premium">
            </a>
            <p><a href="colectie5.html" style="text-decoration: none; color: #333;">Apes Bunitori Premium</a></p>
        </div>
        <!-- Apes Bunitori Christmas Club -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-christmas-club/overview" target="_blank">
                <img src="images/placeholder6.png" alt="Apes Bunitori Christmas Club">
            </a>
            <p><a href="colectie6.html" style="text-decoration: none; color: #333;">Apes Bunitori Christmas Club</a></p>
        </div>
        <!-- Apes Bunitori Limited Edition -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/apes-bunitori-limited-edition/overview" target="_blank">
                <img src="images/placeholder7.png" alt="Apes Bunitori Limited Edition">
            </a>
            <p><a href="colectie7.html" style="text-decoration: none; color: #333;">Apes Bunitori Limited Edition</a></p>
        </div>
        <!-- Ape UEFA Champions League -->
        <div class="collection-link">
            <a href="https://opensea.io/collection/ape-uefa-champions-league/overview" target="_blank">
                <img src="images/placeholder8.png" alt="Ape UEFA Champions League">
            </a>
            <p><a href="colectie8.html" style="text-decoration: none; color: #333;">Ape UEFA Champions League</a></p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        &copy; 2023-2025 NFT Collections.
    </footer>

    <!-- Include Web3.js -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js"></script>

    <!-- Custom Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Verifică dacă MetaMask este disponibil
            if (window.ethereum) {
                window.web3 = new Web3(window.ethereum);
            } else {
                alert("MetaMask nu este instalat.");
            }

            const mintButton = document.querySelector('.mint-button');
            
            // Adresa și ABI-ul contractului tău
            const contractAddress = "0xYourContractAddress";  // înlocuiește cu adresa contractului tău
            const contractABI = [
                // ABI-ul tău aici
            ];

           // Asigură-te că ai importat Web3.js și că ai configurat MetaMask sau un alt provider

// Configurare Web3 (folosind MetaMask ca provider)
const web3 = new Web3(window.ethereum);

// ABI-ul contractului pe care l-ai furnizat (partea relevantă)
const contractABI = [
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "bytes32",
        "name": "role",
        "type": "bytes32"
      },
      {
        "indexed": true,
        "internalType": "bytes32",
        "name": "previousAdminRole",
        "type": "bytes32"
      },
      {
        "indexed": true,
        "internalType": "bytes32",
        "name": "newAdminRole",
        "type": "bytes32"
      }
    ],
    "name": "RoleAdminChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "bytes32",
        "name": "role",
        "type": "bytes32"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "sender",
        "type": "address"
      }
    ],
    "name": "RoleGranted",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "DEFAULT_ADMIN_ROLE",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "role",
        "type": "bytes32"
      }
    ],
    "name": "getRoleAdmin",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "role",
        "type": "bytes32"
      },
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "grantRole",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
];

// Adresa contractului
const contractAddress = '0x629077BB7190D751fAD5956fE44295012F954aa5';

// Crearea instanței contractului
const contract = new web3.eth.Contract(contractABI, contractAddress);

// Exemplu de funcție pentru a obține rolul implicit de administrator
async function getDefaultAdminRole() {
  try {
    const role = await contract.methods.DEFAULT_ADMIN_ROLE().call();
    console.log("Default admin role:", role);
  } catch (error) {
    console.error("Error getting default admin role:", error);
  }
}

// Exemplu de funcție pentru a verifica dacă un cont are un anumit rol
async function hasRole(role, account) {
  try {
    const hasRole = await contract.methods.hasRole(role, account).call();
    console.log(`Account ${account} has role ${role}:`, hasRole);
  } catch (error) {
    console.error("Error checking role:", error);
  }
}

// Exemplu de funcție pentru a acorda un rol unui cont
async function grantRole(role, account) {
  try {
    const accounts = await web3.eth.getAccounts();
    const sender = accounts[0]; // Folosește primul cont disponibil (trebuie să fii conectat la MetaMask)
    await contract.methods.grantRole(role, account).send({ from: sender });
    console.log(`Role ${role} granted to ${account}`);
  } catch (error) {
    console.error("Error granting role:", error);
  }
}

// Exemplu de ascultare pentru evenimentele `RoleGranted`
contract.events.RoleGranted({
  fromBlock: 0
})
.on('data', (event) => {
  console.log("Role granted event:", event);
})
.on('error', (error) => {
  console.error("Error with event:", error);
});

// Exemplu de apelare a funcțiilor
const role = web3.utils.asciiToHex('ADMIN_ROLE'); // Înlocuiește cu rolul dorit
const account = '0x...'; // Adresa contului pentru verificare sau acordare de roluri

// Apeluri de exemplu
getDefaultAdminRole();
hasRole(role, account);
grantRole(role, account);


            // Funcția care se va apela la click pe butonul de mint
            mintButton.addEventListener('click', async function() {
                try {
                    // Solicitați acces la contul MetaMask
                    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                    const userAddress = accounts[0];  // Adresa utilizatorului

                    // Verificăm dacă utilizatorul este conectat
                    if (!userAddress) {
                        alert("Conectează-te la MetaMask.");
                        return;
                    }

                    // Apelează funcția de mint
                    const mintTransaction = await contract.methods.mint(userAddress).send({
                        from: userAddress
                    });

                    // Afișează tranzacția în consola
                    console.log('NFT Minted:', mintTransaction);

                    alert("NFT-ul a fost mințuit cu succes!");
                } catch (error) {
                    console.error("Eroare la minting:", error);
                    alert("A apărut o eroare. Încearcă din nou.");
                }
            });
        });
    </script>
</body>
</html>
